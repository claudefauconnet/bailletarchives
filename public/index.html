<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" media="screen" type="text/css" title="Design" href="js/jquery/jquery-ui.min.css"/>
    <link rel="stylesheet" href="js/jsTree/themes/default/style.min.css"/>


    <script src="js/jquery/jquery.min.js"></script>
    <script src="js/jquery/jquery-ui.min.js"></script>
    <script src="js/async.js"></script>


    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/fc-3.2.5/fh-3.1.4/r-2.2.2/sc-1.5.0/sl-1.2.6/datatables.min.css"/>
    <script src="js/dataTable.js"></script>
    <script type="text/javascript"
            src="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/fc-3.2.5/fh-3.1.4/r-2.2.2/sc-1.5.0/sl-1.2.6/datatables.min.js"></script>


    <script src="js/jsTree/treeController.js"></script>

    <script src="js/recordController.js"></script>


    <script src="js/mainController.js"></script>
    <script src="js/statistics.js"></script>
    <script src="js/tools.js"></script>

    <script src="js/listController.js"></script>
    <script src="js/config.js"></script>
    <script src="js/context.js"></script>
    <script src="js/util.js"></script>


    <script src="js/magasinD3.js"></script>
    <script src="js/sorties.js"></script>

    <script src="js/tabletteD3.js"></script>
    <script src="js/magasinD3dialog.js"></script>

    <script src="js/d3/d3.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.min.js"></script>

    <style>
        body {
            font-family: Verdana;
            font-size: 14px;
        }

        input, button {
            margin: 0px;
            padding: 2px;
            width: 100px;

        }

        button {
            width: inherit;
            margin: 3px;
            padding: 3px;
            font-size: 12px;
        }

        input {
            width: 150px;
        }

        #main {
            width: 100%;
            display: table
        }

        #left {
            float: left;
            display: inline;
            width: 20%;
        }

        #right {
            float: left;
            display: inline;
            width: 77%;
            margin-left: 5px;
        }

        .accordionInnerDiv {
            min-height: 300px;
            background-color: #9ca7b3;
            background-color: snow;

        }

        #listRecordsDiv, #linkedRecordsDiv {

            overflow: auto;

        }

        #listRecordsDiv {
            border: #0a6aa1;
            border-width: 2px;
            border-style: solid;
        }

        .myDatatable td {
            border-bottom-style: solid;
            border-bottom-width: 1px;
            border-bottom-color: #93aeca;
            border-left-style: solid;
            border-left-width: 1px;
            border-left-color: #93aeca;
            width: 100px !important;

            height: 20px !important;
        }

        .dataTables_wrapper {
            margin: 5px;
        }

        .dt-buttons {
            left: 200px;
            position: relative;
        }

        .dataTables_paginate {
            font-weight: bold;
        }

        #messageDiv {
            font-style: italic;
        }

        .searchCriteria {
            background-color: white;
            border-radius: 5px;
            padding: 2px;
            margin: 2px;
            font-size: 10px;
            color: #0a6aa1;
        }

        .dialogTab {

            background-color: #c2beff85;
        }

        #dialogDiv, .ui-dialog-buttonpane {

            background-color: #93aeca;
        }

        .selected {
            background-color: #0a6aa1;
        }

        .title {
            font-weight: bold;
            font-size: 18px;
            color: #0a6aa1;

        }

        #recordMessageSpan {

            font: bold 14px Serif;
            color: red;
        }

        /*   table thead th {
               transform: rotate(-45deg);
               transform-origin: top left;
           }

           .table-scrollable{
               overflow: visible;
           }*/

        div.dt-buttons {
            float: left;
        }

        .ui-accordion-header {
            font-weight: bold;
            color: #0a6aa1;
        }

        #popupD3Div {
            visibility: hidden;
            position: absolute;
            background-color: #ddd;
            margin: 3px;
            padding: 3px;
            border-style: solid;
            border-width: 1px;
        }

        #dialogContentDiv {

        }

        #dialogD3 {
            background-color: #ddd;
            margin: 3px;
            padding: 3px;
            width: 500px;
            height: 500px;
        }

        #messageSpan {
            color: #003eff;
            font-weight: bold;
        }

        .alignCenterFlex {
            display: flex;
            align-content: center
        }


    </style>

    <script>
        var dialog, dialog2, dialog3;
        $(function () {

            mainController.setDivsSize();
            $("#leftAccordion").accordion({

                activate: function (event, ui) {
                    var content = ui;
                    if (ui.newHeader.text() == "Magasins")
                        magasinD3.init("listRecordsDiv")

                }

            });

            $("#tabs").tabs({
                activate: function (event, ui) {
                    var index = ui.newTab.index();
                    if (index > 0) {
                        mainController.loadTab(index)
                    }

                }
            });

            $("#magasinsDivTabs").tabs({
                activate: function (event, ui) {
                    var index = ui.newTab.index();
                    if (index > 0) {

                    }

                }
            });

            dialog = $("#dialogDiv").dialog({
                autoOpen: false,
                height: mainController.totalDims.h - 100,
                width: "100%",
                modal: true,
                buttons: {
                    Fermer: function () {
                        dialog.dialog("close");
                    }
                },
                close: function () {
                    // allFields.removeClass("ui-state-error");
                }
            });
            dialog2 = $("#dialog2Div").dialog({
                autoOpen: false,
                height: mainController.totalDims.h * 1.0,
                width: "100%",
                modal: true,
                buttons: {
                    Fermer: function () {
                        dialog2.dialog("close");
                    }
                },
                close: function () {
                    // allFields.removeClass("ui-state-error");
                }
            });

            dialog3 = $("#dialog3Div").dialog({
                autoOpen: false,
                height: 500,
                width: "50%",
                modal: true,
                buttons: {
                    Fermer: function () {
                        dialog3.dialog("close");
                    }
                },
                close: function () {
                    // allFields.removeClass("ui-state-error");
                }
            });
            dialogD3 = $("#dialogD3").dialog({
                autoOpen: false,
                modal: false,
                position: {my: "left top", at: "left top", of: window},
                close: function () {
                    // allFields.removeClass("ui-state-error");
                }
            });


            $("#loginDialogDiv").dialog({
                autoOpen: false,
                modal: true,
                buttons: {
                    "OK": function () {
                        mainController.logon();
                    },
                    "Fermer": function () {
                        $(this).dialog("close");
                    }
                }
            });
            if (false) {
                $("#searchTableInput").attr("disabled", true)
                $("#leftAccordion").css("opacity", 0.2);
                $("#loginDialogDiv").dialog("open");
            }
            mainController.bindActions();


            mainController.loadDataModel(function (err, result) {
                if (err)
                    return;
                mainController.initTablesSelects();
                mainController.loadLists();


            });


        })

    </script>
</head>
<body>
<div id="messageDiv"></div>
<div id="main">

    <div id="left">

        <div id="leftAccordion">
            <h1>Données</h1>
            <div id="versementsDiv" class="accordionInnerDiv">
                <table align="center">
                    <tr>
                        <td>
                            table
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="searchTableInput" size="5"></select>
                            <button id="addRecordButton" style="width:60px">Ajouter</button>&nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            champ
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="searchColumnInput"></select>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <select id="searchOperatorInput"></select> <input id="searchValueInput"
                                                                              style="width:100px"/>
                        </td>
                    </tr>

                    <tr>
                        <td>

                            <button id="andSearchButton" style="width:20px"> +</button>
                            <img src='images/clear.png' style="vertical-align: middle" width='20px'
                                 onclick='listController.removeSearchCriteria(-1)'>
                            <button id="searchButton"> chercher</button>


                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="searchCriteriaDiv">


                            </div>
                        </td>
                    </tr>
                </table>

            </div>
            <h1>Magasins</h1>
            <div id="MagasinsDiv" class="accordionInnerDiv">
                <button onclick="magasinD3.clearHighlights()">effacer</button>
                <button onclick="magasinD3.initialZoom()">initial Zoom</button>
                <button onclick="magasinD3.modifyDrawing('delete','B-07-09-03')">test</button>
                <button onclick="magasinD3.writeInCache()">savecache</button>
                <button onclick="magasinD3.loadCache()">loadcache</button>



                <div id="magasinsDivTabs" style=" width: 220px;min-height: 300px;left: -20px;">
                    <ul>
                        <li><a href="#magasinsDivTabs_versement">versements</a></li>
                        <li><a href="#magasinsDivTabs_sorties">sorties</a></li>

                    </ul>

                    <div id="magasinsDivTabs_sorties" class="alignCenterFlex">
                        <button onclick="sorties.highlightSorties()">voir les sorties</button>
                        <button onclick="sorties.manageSorties()">gérer sorties</button>
                    </div>


                    <div id="magasinsDivTabs_boites"  class="alignCenterFlex">
                        <button onclick="magasinD3.searchVersement('0114')">Localiser versement</button>
                        <button onclick="magasinD3.showDialogChercherTablettesPourVersement()">Integrer versement
                        </button>
                    </div>


                </div>

                <br>
                <span id="messageSpan"></span>

            </div>
            <h1>Outils</h1>
            <div id="tooldsDiv" class="accordionInnerDiv">

                <select id="toolsSelect" size="10" style="left: -30px;position: relative;">
                </select>

            </div>


            <h1>Statistiques</h1>
            <div id="statsDiv" class="accordionInnerDiv">
                <select id="statsSelect" size="10" style="left: -30px;position: relative;">

                </select>

            </div>

        </div>

    </div>

    <div id="right">
        <!--   <button id="showHideLeftPanelButton"><< >></button>-->
        <div id="listRecordsDiv" class="dataTableDiv">


        </div>
    </div>

</div>

<div id="dialogDiv">

    <div id="tabs">
        <ul>
            <li><a href="#tabs-recordDiv">Details</a></li>
            <li><a href="#tabs-linkedRecordDiv1">LinkedRecord</a></li>
            <!--  <li><a href="#tabs-linkedRecordDiv2">LinkedRecord</a></li>-->


        </ul>
        <div id="tabs-recordDiv" class="dialogTab">
            <div id="recordDetailsDiv"></div>

        </div>
        <div id="tabs-linkedRecordDiv1" class="dialogTab">

            <!--   <button id="deleteLinkedRecordButton">Supprimer lien</button>
               <button class="showAddLinkedRecordButton">Ajouter lien</button>-->
            <div id="linkedRecordsDiv" class="dataTableDiv"></div>


        </div>
        <!--   <div id="tabs-linkedRecordDiv2" class="dialogTab">
               <button id="deleteLinkedRecordButton2">Délier</button>
               <button class="showAddLinkedRecordButton">Lier</button>
               <div id="linkedRecordsDiv2" class="dataTableDiv"></div>


           </div>-->


    </div>
</div>
<div id="dialog2Div">
    <select id="linkedRecordsFieldSelect"></select></select><input id="searchLinkedRecordsInput">
    <button id="searchLinkedRecordsButton">chercher</button>
    <button id="addLinkedRecordButton">ajouter lien</button>
    <div id="new_linkedRecordsDiv" class="dataTableDiv"></div>
</div>

<div id="dialog3Div">

</div>


<div id="loginDialogDiv" title="Connexion">
    <table>
        <tr>
            <td>
                Utilisateur
            </td>
            <td>
                <input id="login">
            </td>
        </tr>
        <tr>
            <td>
                mot de passe
            </td>
            <td>
                <input type="password" id="password">
            </td>
        </tr>
    </table>
    <span id="logonMessageDiv"></span>

</div>
<div id="popupD3Div">
    <div id="dialogContentDiv"></div>
</div>

<div id="dialogD3"></div>

</body>
</html>